# About this report

This content has been loaded from the template report `.Rmd` file. Please edit it at your best convenience!


```{r setup, include=FALSE, eval = TRUE, echo = FALSE}
opts_chunk$set(
  echo=input$report_echo,
  error=TRUE
)
```

```{r evals, echo = FALSE}
evalJoined <- FALSE
evalSampleplan <- FALSE
evalCounts <- FALSE
if (!is.null(reactives$joined)){evalJoined <- TRUE}
if (!is.null(reactives$sampleplan)){evalSampleplan <- TRUE}
if (!is.null(reactives$countsRaw)){evalCounts <- TRUE}

options(kableExtra.auto_format = F)
```


# Overview on the data

## Samples Selected

The following samples were selected in this analysis : 

<button title="Click to show answer" type="button" onclick="if(document.getElementById('BE_Genus_C.txt') .style.display=='none') {document.getElementById('BE_Genus_C.txt') .style.display=''}else{document.getElementById('BE_Genus_C.txt') .style.display='none'}">Show/hide</button>
<div id="BE_Genus_C.txt" style="display:none">
```{r, echo = FALSE, eval = evalSampleplan}
kableExtra::kable(reactives$sampleplan,caption = "samplePlan Table") %>%
kable_styling() %>%
kableExtra::column_spec(1:ncol(reactives$sampleplan),width = "80em", bold = FALSE, italic = FALSE)# %>%
  #scroll_box(width = "100%", height = "20%")

```

```{r, echo = FALSE, eval = !evalSampleplan}

print("Please upload SamplePlan file first")

```
</div>


## Distributions

### Read Numbers

```{r, echo = FALSE, eval = evalJoined}

  counts <- reactives$joined
      counts <- counts %>%
        group_by(.data$Sample_ID, .data$Replicate, .data$Cell_line, .data$Timepoint) %>%
        summarise(total = sum(.data$count)) %>% 
        as.data.frame() %>%
        ggplot(aes(x = .data$Timepoint, y = .data$total)) +
        geom_col(position = position_dodge()) + facet_wrap(vars(.data$Replicate, .data$Cell_line), nrow = 1) +
        labs(title = "Number of reads by sample") #+

      
```


```{r, echo = FALSE, eval = !evalJoined}

print("Please upload both SamplePlan and counts matrix first")

```

## Files 

```{r, echo = FALSE, eval = evalCounts}
br()
write.table(reactives$countsRaw,file = "/tmp/Rawcounts.csv",sep = ",",quote = FALSE)
br()
xfun::embed_files(path = "/tmp/Rawcounts.csv", text = "Counts Matrix File")
```


```{r, echo = FALSE, eval = evalSampleplan}
br()
write.table(reactives$sampleplan,file = "/tmp/sampleplan.csv",sep = ",",quote = FALSE)
br()
xfun::embed_files(path = "/tmp/sampleplan.csv", text = "SamplePlan file")
```


```{r, echo = FALSE, eval = !evalCounts}
print("Please upload counts matrix first")
```


```{r, echo = FALSE, eval = !evalSampleplan}
print("Please upload both SamplePlan first")
```


# About COOKIE CRISP'R

`COOKIE CRISP'R` is a package containing a Shiny application for
analyzing CRISPR screening experiments data in different conditions and experimental factors.

`COOKIE CRISP'R` was developed by the bio-informatic platform of the Curie's Institute (France). 

## Developers

`COOKIE CRISP'R` is currently maintained by Cl√©ment BENOIT and Pierre Gestraud at the Bioinformatic Platform (Institut Curie) (https://curie.fr/).
You can contact them by clicking on the buttons below.

<a href="mailto:mailto:pierre.gestraud@curie.fr?subject=[COOKIE CRISP'R_feedback]" class="btn btn-primary">Pierre Gestraud</a>

<a href="mailto:mailto:clement.benoit@curie.fr?subject=[COOKIE CRISP'R_feedback]" class="btn btn-primary">Clement BENOIT</a>


# Citation info

If you use `COOKIE CRISP'R` for your analysis, please cite it as here below:

```{r, warning=FALSE}
citation("CRISPRApp")
```

# Session Information

```{r}
sessionInfo()
```

```{r, echo = FALSE}
library(shiny)
footertemplate <- function(){
  tags$div(
    class = "footer",
    style = "text-align:center",
    tags$div(
      class = "foot-inner",
      list(
        hr(),
        "This report was generated with", tags$a(href="http://bioconductor.org/packages/COOKIE CRISP'R/", "COOKIE CRISP'R"), br(),
        "COOKIE CRISP'R is a project developed by Nicolas Servant, Pierre Gestraud, Aurelien Bore and Clement Benoit from the bioinformatic and crispr'it platforms of the Institut Curie : ",
        br(),
        tags$a(href="https://science.curie.fr/plateformes/criblage-genetique-crispr-crisprit/","CRISPRIT platform"),
        br(),
        tags$a(href="https://science.curie.fr/recherche/developpement-cancer-genetique-epigenetique/dynamique-de-linformation-genetique/equipe-vallot/","Bioinformatic Platform"),br())
      )
    )
}
```

```{r, echo = FALSE}
footertemplate()
```
